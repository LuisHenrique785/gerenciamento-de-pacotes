<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Labirinto Literário</title>
  <style>
    :root {
      --gold: #c5a059;
      --bg: #050505;
      --text: #c0c0c0;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Garamond', 'Georgia', serif;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    canvas {
      position: fixed;
      top: 0; left: 0;
      z-index: 1;
      opacity: 0.1;
    }

    .container {
      position: relative;
      z-index: 10;
      max-width: 700px;
      width: 90%;
    }

    .card {
      background: #0a0a0a;
      border: 1px solid #1a1a1a;
      padding: 50px;
      box-shadow: 0 40px 100px rgba(0,0,0,0.9);
      border-radius: 2px;
      border-top: 3px solid var(--gold);
      transition: all 0.5s ease;
    }

    h1 {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 8px;
      color: var(--gold);
      text-align: center;
      margin-bottom: 40px;
      opacity: 0.7;
    }

    #content {
      font-size: 1.2rem;
      line-height: 1.8;
      text-align: justify;
      min-height: 200px;
    }

    strong {
      display: block;
      margin-bottom: 15px;
      font-size: 1.7rem;
      color: #fff;
      font-weight: normal;
      font-variant: small-caps;
      border-bottom: 1px solid #222;
      padding-bottom: 10px;
    }

    .controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 40px;
    }

    .btn-discover {
      padding: 15px 45px;
      background: transparent;
      border: 1px solid var(--gold);
      color: var(--gold);
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.4s;
      letter-spacing: 4px;
      font-size: 0.8rem;
    }

    .btn-discover:hover {
      background: var(--gold);
      color: #000;
      box-shadow: 0 0 25px rgba(197, 160, 89, 0.3);
    }

    .loading-pulse {
      font-style: italic;
      color: var(--gold);
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse { 0% { opacity: 0.3; } 50% { opacity: 1; } 100% { opacity: 0.3; } }
  </style>
</head>
<body>

<canvas id="background-fx"></canvas>

<div class="container">
  <div class="card">
    <h1>Arquivo de Pensamentos</h1>
    <div id="content">
      "Um livro deve ser o machado para o mar congelado dentro de nós." <br><br>
      Pressione o botão para invocar uma nova perspectiva.
    </div>
    <div class="controls">
      <button class="btn-discover" id="btnNext">Sortear Destino</button>
    </div>
  </div>
</div>

<script>
  // --- EFEITO VISUAL: NÉVOA LENTA ---
  const canvas = document.getElementById('background-fx');
  const ctx = canvas.getContext('2d');
  let w, h;
  function resize() { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; }
  window.addEventListener('resize', resize);
  resize();

  function draw() {
    ctx.fillStyle = 'rgba(5, 5, 5, 0.1)';
    ctx.fillRect(0, 0, w, h);
    for(let i=0; i<3; i++) {
      ctx.beginPath();
      ctx.arc(Math.random()*w, Math.random()*h, Math.random()*150, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(40, 40, 40, 0.05)';
      ctx.fill();
    }
    requestAnimationFrame(draw);
  }
  draw();

  // --- O ACERVO (EXPANDIDO PARA MÁXIMA DESCOBERTA) ---
  const biblioteca = [
    // RUSSOS
    "Fiódor Dostoiévski", "Crime e Castigo", "Os Irmãos Karamazov", "O Idiota", "Notas do Subterrâneo", "O Adolescente (Dostoiévski)", "Noites Brancas (Dostoiévski)", "O Jogador (Dostoiévski)", "Gente Pobre", "O Duplo", "Humilhados e Ofendidos", "Recordações da Casa dos Mortos", "Liev Tolstói", "Guerra e Paz", "Anna Karenina", "A Morte de Ivan Ilitch", "Ressurreição (romance)", "Sonata a Kreutzer", "Felicidade Conjugal", "Nikolai Gogol", "Almas Mortas", "O Capote", "O Nariz (conto)", "Taras Bulba", "Anton Tchekhov", "A Estepa", "O Jardim das Cerejeiras", "As Três Irmãs", "Ivan Turguêniev", "Pais e Filhos", "Mikhail Bulgakov", "O Mestre e Margarida", "Coração de Cão",
    // EXISTENCIALISTAS E FILÓSOFOS
    "Franz Kafka", "A Metamorfose", "O Processo (livro)", "O Castelo (livro)", "Um Médico Rural", "Diários (Kafka)", "Albert Camus", "O Estrangeiro", "O Mito de Sísifo", "A Peste", "A Queda (livro)", "O Homem Revoltado", "Jean-Paul Sartre", "A Náusea", "O Ser e o Nada", "Entre Quatro Paredes", "Friedrich Nietzsche", "Assim Falou Zaratustra", "Além do Bem e do Mal", "Ecce Homo", "O Anticristo (livro)", "Simone de Beauvoir", "O Segundo Sexo", "A Convidada", "Arthur Schopenhauer", "Emil Cioran", "Do Inconveniente de Ter Nascido", "Søren Kierkegaard", "Ou isso, ou aquilo", "Temor e Tremor",
    // CLÁSSICOS MUNDIAIS
    "Machado de Assis", "Memórias Póstumas de Brás Cubas", "Dom Casmurro", "Quincas Borba", "Esaú e Jacó", "Memorial de Aires", "O Alienista", "Fernando Pessoa", "Livro do Desassossego", "James Joyce", "Ulysses (livro)", "Dubliners", "Virginia Woolf", "Ao Farol", "Mrs Dalloway", "Orlando: Uma Biografia", "Victor Hugo", "Os Miseráveis", "Charles Baudelaire", "As Flores do Mal", "Marcel Proust", "Em Busca do Tempo Perdido", "Herman Melville", "Moby Dick", "Bartleby, o Escrivão", "Thomas Mann", "A Montanha Mágica", "Morte em Veneza", "Goethe", "Fausto (Goethe)", "Os Sofrimentos do Jovem Werther", "Oscar Wilde", "O Retrato de Dorian Gray", "Dante Alighieri", "Divina Comédia"
  ];

  const contentDiv = document.getElementById('content');
  const btn = document.getElementById('btnNext');

  async function invocarObra() {
    contentDiv.innerHTML = '<span class="loading-pulse">Consultando os registros do tempo...</span>';
    
    try {
      const escolha = biblioteca[Math.floor(Math.random() * biblioteca.length)];
      const url = `https://pt.wikipedia.org/w/api.php?action=query&format=json&origin=*&prop=extracts&exintro&explaintext&titles=${encodeURIComponent(escolha)}`;
      
      const response = await fetch(url);
      const data = await response.json();
      const page = data.query.pages[Object.keys(data.query.pages)[0]];
      const texto = page.extract;

      if (texto) {
        // Pega as primeiras 4 frases para dar uma boa ideia do livro/autor
        const resumo = texto.split('. ').slice(0, 4).join('. ') + '.';
        contentDiv.innerHTML = `<strong>${escolha}</strong>${resumo}`;
      } else {
        invocarObra(); // Tenta outro se a Wikipedia não retornar texto
      }
    } catch (e) {
      contentDiv.innerText = "A conexão com o passado falhou. Tente novamente.";
    }
  }

  btn.addEventListener('click', invocarObra);
</script>

</body>
</html>
